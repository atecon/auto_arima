clear
set verbose off

#binclude auto_arima.gfn
include "/home/ninja/repo/auto_arima/src/auto_arima.inp" --force

# Select an example
scalar EXAMPLE = 1

if EXAMPLE == 1
    # Box and Jenkins "Series G" (airline passengers)
    open bjg.gdt -p -q         # monthly frequency
elif EXAMPLE == 2
    open hendry_jae.gdt -q -p  # annual frequency
endif


list xlist = null
if EXAMPLE == 1
    series y = lg

    # Find "best" ARIMA model and pass some additional option
    bundle Bout = auto_arima(y, , defbundle("verbose", 1, "max_p", 4))

elif EXAMPLE == 2
    series y = ldiff(gdp)

    # Find "best" ARIMA model
    bundle Bout = auto_arima(y)
endif

# print stuff in resulting bundle
print Bout

# TODO: Print summary of results for all info-crit
print_auto_arima_results(Bout)


# Print coefficient vector of the n-th best model using the AIC
matrix arima_params = get_auto_arima_parameters(Bout, "aic", 1)
print arima_params

matrix arima_params = get_auto_arima_parameters(Bout, "aicc", 2)
print arima_params


# Retrieve the gretl command for estimating the n-th best model according to BIC
string arima_cmd = get_auto_arima_command(Bout, "bic", 2)
arima_cmd
# Execute actual estimation
@arima_cmd
